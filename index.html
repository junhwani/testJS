<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>JUNANI WALLET</title>
  </head>

  <body>
    <ul>
      <li>나의 어카운트 주소 : <span id="accountAddr"></span> </li>
      <li>나의 이더 잔액 : <span id="accountBal"></span> </li>
      <li>이더 보내기 <br>
        <button onclick="transaction()">이더 전송</button>
      </li>
    </ul>



  </body>

  <script src="https://cdn.rawgit.com/ethereum/web3.js/develop/dist/web3.js"></script>

  <script>
    var contractAddress = '0xdc7c743110Ec689d82f050302319AE27aF84f8fa';
    var abi = [{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"comment","type":"string"},{"indexed":false,"name":"timestamp","type":"uint256"},{"indexed":false,"name":"count","type":"uint256"}],"name":"Commented","type":"event"},{"constant":false,"inputs":[{"name":"comment","type":"string"}],"name":"makeComment","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"blockByCounter","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"content","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"numComments","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];
    var declaration;
    var myAddr;
    var startingBlock;
    var maxComments = 200;
    //var explorer = "https://ropsten.etherscan.io";
    var explorer = "https://etherscan.io";

    window.addEventListener('load', function(){
      if(typeof web3 !== 'undefined'){
        window.web3 = new Web3(web3.currentProvider);
      } else{
        console.log('No web3? You should consider trying MetaMask!');
        window.web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
      }

      startApp();
    });

    function startApp(){
      declaration = web3.eth.contract(abi).at(contractAddress);

      web3.eth.getAccounts(function(e,r){
        if(!e){
          myAddr = r[0];
          document.getElementById('accountAddr').innerHTML = myAddr;
        } else{
          console.log(err);
        }
      });
    }

  </script>
</html>
